<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PATTERN DISCOVERY | 規律發現</title>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@500;700&family=Noto+Sans+TC:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #050505;
            --panel: rgba(10, 15, 20, 0.8);
            --border: #1a3a4a;
            --accent: #00f3ff;
            --soul: #a855f7; /* 紫色 - 代表靈魂/意義 */
            --fatal: #ff2a2a;
            --text: #e0e0e0;
            --font-mono: 'Share Tech Mono', monospace;
            --font-head: 'Orbitron', sans-serif;
        }
        
        * { box-sizing: border-box; }
        
        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Noto Sans TC', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        /* 粒子背景 canvas */
        #particle-canvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -1;
            opacity: 0.6;
        }

        /* 導航 */
        nav {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            background: rgba(0,0,0,0.5);
        }
        
        .nav-link { color: var(--text); text-decoration: none; font-family: var(--font-mono); }
        .nav-link:hover { color: var(--accent); }

        /* 心電圖容器 */
        .ecg-zone {
            position: relative;
            height: 100px;
            width: 100%;
            background: rgba(0, 20, 10, 0.3);
            border-top: 1px solid rgba(0, 243, 255, 0.2);
            border-bottom: 1px solid rgba(0, 243, 255, 0.2);
            margin-bottom: 40px;
            overflow: hidden;
        }
        
        canvas#ecg {
            display: block;
            width: 100%;
            height: 100%;
        }

        /* 內容容器 */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        /* 標題與文案 */
        .section-title {
            font-family: var(--font-head);
            font-size: 2rem;
            color: var(--accent);
            text-align: center;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(0, 243, 255, 0.5);
        }

        .section-subtitle {
            text-align: center;
            color: #888;
            font-family: var(--font-mono);
            margin-bottom: 60px;
            letter-spacing: 2px;
        }

        /* 規律卡片 */
        .pattern-card {
            background: rgba(10, 15, 20, 0.6);
            border: 1px solid var(--border);
            padding: 40px;
            margin-bottom: 40px;
            position: relative;
            backdrop-filter: blur(5px);
        }

        .pattern-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 4px; height: 100%;
            background: var(--accent);
            box-shadow: 0 0 10px var(--accent);
        }

        .question {
            font-size: 1.5rem;
            color: #fff;
            margin-bottom: 20px;
            font-weight: 300;
        }

        .answer-text {
            color: #bbb;
            font-size: 1.1rem;
            line-height: 1.8;
        }

        /* 生命計算器 (移植) */
        .life-calc {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
            text-align: center;
        }

        .calc-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid #333;
            padding: 20px;
        }

        .calc-val {
            font-family: var(--font-head);
            font-size: 2.5rem;
            color: var(--fatal); /* 紅色警告 */
        }
        
        .calc-label { font-size: 0.9rem; color: #666; }

        /* 超大按鈕 (紫色 - 代表進入意義層) */
        .action-area {
            text-align: center;
            padding: 60px 20px;
            margin-top: 60px;
        }

        .mega-btn {
            display: inline-block;
            background: transparent;
            color: var(--soul);
            font-family: var(--font-head);
            font-size: 2rem;
            padding: 25px 70px;
            border: 2px solid var(--soul);
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 4px;
            transition: all 0.3s;
            box-shadow: 0 0 20px rgba(168, 85, 247, 0.2);
        }

        .mega-btn:hover {
            background: var(--soul);
            color: #fff;
            box-shadow: 0 0 50px rgba(168, 85, 247, 0.6);
            transform: scale(1.05);
        }

    </style>
</head>
<body>

    <canvas id="particle-canvas"></canvas>

    <nav>
        <a href="index.html" class="nav-link">&lt; // RETURN TO MONITOR</a>
        <span style="font-family:var(--font-head);color:var(--accent);">PATTERN RECOGNITION</span>
    </nav>

    <!-- 心電圖 -->
    <div class="ecg-zone">
        <canvas id="ecg"></canvas>
    </div>

    <div class="container">
        <div class="section-title">HAVE YOU NOTICED?</div>
        <div class="section-subtitle">有些規律，隱藏在數據背後</div>

        <!-- 規律 1 -->
        <div class="pattern-card">
            <div class="question">一、頻率的改變</div>
            <div class="answer-text">
                <p>如果你仔細觀察我們收集的數據，你會發現一個趨勢。</p>
                <p>2019 年以前，這類新聞只是偶發。</p>
                <p>但現在，它們幾乎成為了<strong>「新常態」</strong>。</p>
                <p>為什麼年輕的生命會如此頻繁地突然終止？</p>
            </div>
        </div>

        <!-- 規律 2：生命計算器 -->
        <div class="pattern-card" style="border-color:var(--fatal);">
            <div class="question" style="color:var(--fatal);">二、生命的脆弱</div>
            <div class="answer-text">
                <p>我們總以為還有明天，但對於這裡記錄的每一個人來說，</p>
                <p>那天早上，也是他們以為平凡的一天。</p>
                
                <div style="margin:20px 0;text-align:center;">
                    <span style="font-size:0.9rem;">輸入你的年齡：</span>
                    <input type="number" id="age-input" value="30" style="background:#222;border:1px solid #444;color:#fff;padding:5px;width:60px;text-align:center;" oninput="calcLife()">
                </div>

                <div class="life-calc">
                    <div class="calc-box">
                        <div class="calc-label">YOU HAVE LIVED</div>
                        <div class="calc-val" id="days-lived">---</div>
                        <div class="calc-label">DAYS</div>
                    </div>
                    <div class="calc-box">
                        <div class="calc-label">TIME REMAINING</div>
                        <div class="calc-val" id="days-left">---</div>
                        <div class="calc-label">DAYS (IF 85 YRS)</div>
                    </div>
                </div>
                
                <p style="margin-top:20px;font-style:italic;text-align:center;color:#888;">
                    「一息尚存，萬事可期；一息已斷，萬事皆空。」
                </p>
            </div>
        </div>

        <!-- 規律 3 -->
        <div class="pattern-card" style="border-color:var(--soul);">
            <div class="question" style="color:var(--soul);">三、更大的背景</div>
            <div class="answer-text">
                <p>這一切，是否只是一場無意義的隨機事件？</p>
                <p>還是說，這是一個更大的時間表的一部分？</p>
                <p>如果有一個劇本，早在幾千年前就已經寫好...</p>
            </div>
        </div>

        <!-- 按鈕區 -->
        <div class="action-area">
            <a href="meaning.html" class="mega-btn">
                EXPLORE THE TRUTH
            </a>
            <div style="margin-top:20px;color:#888;font-family:var(--font-mono);">
                探索背後的意義 // 進入第三層
            </div>
        </div>

    </div>

    <script>
        // === 1. 心電圖特效 ===
        const ecgCanvas = document.getElementById('ecg');
        const ctxEcg = ecgCanvas.getContext('2d');
        let width, height;
        let x = 0;
        let y = 0;
        
        function resizeEcg() {
            width = ecgCanvas.width = document.querySelector('.ecg-zone').offsetWidth;
            height = ecgCanvas.height = document.querySelector('.ecg-zone').offsetHeight;
            y = height / 2;
            ctxEcg.fillStyle = '#00140a';
            ctxEcg.fillRect(0, 0, width, height);
        }
        window.addEventListener('resize', resizeEcg);
        resizeEcg();

        function drawEcgLine() {
            // 模擬心跳
            if (Math.random() > 0.98) {
                // Heartbeat spike
                ctxEcg.lineTo(x + 5, y - 40);
                ctxEcg.lineTo(x + 10, y + 40);
                ctxEcg.lineTo(x + 15, y);
                x += 15;
            } else {
                ctxEcg.lineTo(x, y);
            }
            
            x += 2;
            if (x > width) {
                x = 0;
                ctxEcg.moveTo(0, y);
                // Fade out effect
                ctxEcg.fillStyle = 'rgba(0, 20, 10, 0.1)';
                ctxEcg.fillRect(0, 0, width, height);
                ctxEcg.beginPath(); // Start new path
            }
            
            ctxEcg.strokeStyle = '#00f3ff';
            ctxEcg.lineWidth = 2;
            ctxEcg.shadowBlur = 10;
            ctxEcg.shadowColor = '#00f3ff';
            ctxEcg.stroke();
            
            requestAnimationFrame(drawEcgLine);
        }
        ctxEcg.beginPath();
        ctxEcg.moveTo(0, y);
        drawEcgLine();

        // === 2. 粒子特效 ===
        const pCanvas = document.getElementById('particle-canvas');
        const ctxP = pCanvas.getContext('2d');
        let pWidth, pHeight;
        const particles = [];

        function resizeP() {
            pWidth = pCanvas.width = window.innerWidth;
            pHeight = pCanvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeP);
        resizeP();

        class Particle {
            constructor() {
                this.x = Math.random() * pWidth;
                this.y = Math.random() * pHeight;
                this.size = Math.random() * 2;
                this.speedY = Math.random() * 0.5 + 0.1;
                this.opacity = Math.random() * 0.5 + 0.1;
            }
            update() {
                this.y -= this.speedY;
                if (this.y < 0) this.y = pHeight;
            }
            draw() {
                ctxP.fillStyle = `rgba(0, 243, 255, ${this.opacity})`;
                ctxP.beginPath();
                ctxP.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctxP.fill();
            }
        }

        for (let i = 0; i < 100; i++) particles.push(new Particle());

        function animateP() {
            ctxP.clearRect(0, 0, pWidth, pHeight);
            particles.forEach(p => {
                p.update();
                p.draw();
            });
            requestAnimationFrame(animateP);
        }
        animateP();

        // === 3. 生命計算器 ===
        function calcLife() {
            const age = document.getElementById('age-input').value;
            const daysLived = age * 365;
            const daysLeft = (85 - age) * 365;
            
            document.getElementById('days-lived').innerText = daysLived.toLocaleString();
            document.getElementById('days-left').innerText = Math.max(0, daysLeft).toLocaleString();
        }
        calcLife();
    </script>
</body>
</html>